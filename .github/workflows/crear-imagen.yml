name: Workflow para crear la imagen

on:
 workflow_dispatch:

jobs:
 cargar:
  runs-on: ubuntu-latest
  steps:
  - uses: actions/checkout@v3

  - name: Extraer version
    id: version
    run: |
     VERSION=$(jq -r '.version' package.json)
     echo "VERSION=$VERSION" >> $GITHUB_ENV
     echo "app_version=$VERSION" >> $GITHUB_OUTPUT

  - name: Extraer nombre
    id: nombre
    run: |
     NOMBRE=$(jq -r '.name' package.json)
     echo "NOMBRE=$NOMBRE" >> $GITHUB_ENV
     echo "app_name=$NOMBRE" >> $GITHUB_OUTPUT
    
  - name: Cargar nombre imagen
    id: cargar_imagen
    uses: ./action
    with:
     username: hola
     image_name: ${{steps.nombre.outputs.app_name}}
     version: ${{steps.version.outputs.app_version}}

  - run: echo "${{env.image_name}}"
